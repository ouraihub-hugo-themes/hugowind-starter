{{- /* 图片画廊 shortcode */ -}}
{{- /* 用法: {{< gallery >}} 会自动显示页面目录下的所有图片 */ -}}

{{- $images := .Page.Resources.ByType "image" -}}
{{- $cols := .Get "cols" | default "3" -}}

{{- if $images -}}
<div class="gallery my-8 grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-{{ $cols }}">
  {{- range $images -}}
  {{- $thumb := .Resize "400x webp" -}}
  <a href="{{ .RelPermalink }}" 
     class="gallery-item block overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow"
     data-lightbox="gallery">
    <img 
      src="{{ $thumb.RelPermalink }}" 
      alt="{{ .Title }}"
      width="{{ $thumb.Width }}"
      height="{{ $thumb.Height }}"
      loading="lazy"
      decoding="async"
      class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300"
    >
  </a>
  {{- end -}}
</div>
{{- else -}}
<p class="text-muted dark:text-slate-400">{{ i18n "no_images" | default "No images found." }}</p>
{{- end -}}
